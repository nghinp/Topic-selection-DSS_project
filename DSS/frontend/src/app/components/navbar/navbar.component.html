<header class="navbar">
  <div class="nav-left">
    <a class="logo" aria-label="logo" routerLink="/">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
        <path fill-rule="evenodd"
          d="M1.5 9.832v1.793c0 1.036.84 1.875 1.875 1.875h17.25c1.035 0 1.875-.84 1.875-1.875V9.832a3 3 0 0 0-.722-1.952l-3.285-3.832A3 3 0 0 0 16.215 3h-8.43a3 3 0 0 0-2.278 1.048L2.222 7.88A3 3 0 0 0 1.5 9.832ZM7.785 4.5a1.5 1.5 0 0 0-1.139.524L3.881 8.25h3.165a3 3 0 0 1 2.496 1.336l.164.246a1.5 1.5 0 0 0 1.248.668h2.092a1.5 1.5 0 0 0 1.248-.668l.164-.246a3 3 0 0 1 2.496-1.336h3.165l-2.765-3.226a1.5 1.5 0 0 0-1.139-.524h-8.43Z"
          clip-rule="evenodd" />
        <path
          d="M2.813 15c-.725 0-1.313.588-1.313 1.313V18a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-1.688c0-.724-.588-1.312-1.313-1.312h-4.233a3 3 0 0 0-2.496 1.336l-.164.246a1.5 1.5 0 0 1-1.248.668h-2.092a1.5 1.5 0 0 1-1.248-.668l-.164-.246A3 3 0 0 0 7.046 15H2.812Z" />
      </svg>
    </a>
    <form class="search-box" aria-label="Search" (submit)="submitSearch(searchInput.value)">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <circle cx="11" cy="11" r="7"></circle>
        <line x1="16.65" y1="16.65" x2="21" y2="21"></line>
      </svg>
      <input #searchInput type="search" placeholder="Search topics..." />
    </form>
  </div>

  <div class="nav-center" aria-label="Primary">
    <nav class="nav-links">
      <ng-container *ngFor="let item of navItems">
        <a
          *ngIf="
            (!item.requiresAuth || auth.isAuthed()) &&
            (!item.requiresAdmin || auth.isAdmin()) &&
            (!item.requiresNonAdmin || !auth.isAdmin())
          "
          [routerLink]="item.path"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: item.path === '/' }"
        >
          {{ item.label }}
        </a>
      </ng-container>
    </nav>
  </div>

  <div class="nav-right">
    <div class="auth-actions" *ngIf="!auth.isAuthed(); else loggedIn">
      <a class="btn ghost" routerLink="/login">Sign in</a>
      <a class="btn primary" routerLink="/register">Sign up</a>
    </div>
    <ng-template #loggedIn>
      <ng-container *ngIf="auth.isAdmin(); else regularUser">
        <a class="btn ghost" routerLink="/admin">{{ auth.displayName }}</a>
        <button class="btn ghost" type="button" (click)="signOut()">Sign out</button>
      </ng-container>
      <ng-template #regularUser>
        <a class="btn ghost" routerLink="/account">Profile</a>
        <button class="btn ghost" type="button" (click)="signOut()">Sign out</button>
      </ng-template>
    </ng-template>
  </div>
</header>
